{"ast":null,"code":"var _jsxFileName = \"/Users/amitavbaruah/Documents/ethical-internal-website/src/components/Login.js\";\nimport \"./Login.css\";\nimport React, { Component } from \"react\";\nimport ethicalLogo from \"./ethical.png\";\n\nconst bcryptjs = require(\"bcryptjs\");\n\nconst fetch = require(\"node-fetch\");\n\nconst localStorage = require(\"local-storage\");\n\nclass Login extends Component {\n  constructor() {\n    super();\n\n    this.handleChange = event => {\n      this.setState({\n        input: event.target.value\n      });\n    };\n\n    this.state = {\n      input: \"\",\n      hash: \"\",\n      access_token: \"\",\n      validity: false\n    };\n  }\n\n  async hashPassword() {\n    const hash = await bcryptjs.hash(this.state.input, 0);\n    this.setState({\n      hash: hash\n    });\n    return this.state.hash;\n  }\n\n  routeChange() {\n    let path = \"/announcements\";\n    this.props.history.push(path);\n  }\n\n  async buttonClick() {\n    const response = await fetch(\"http://localhost:3001/login\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        hashedAttempt: await this.hashPassword()\n      })\n    });\n    const json = await response.json();\n    this.setState({\n      access_token: json.token,\n      validity: json.correctPassword\n    });\n\n    if (!this.state.validity) {\n      alert(\"Wrong password\");\n    } else {\n      localStorage.set(\"token\", this.state.access_token);\n      this.routeChange();\n    }\n  }\n\n  render() {\n    return React.createElement(\"body\", {\n      className: \"home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"pic\",\n      src: ethicalLogo,\n      alt: \"profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"hi\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"Welcome home EthiCal members, please log in below!\")), React.createElement(\"div\", {\n      className: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Password:\", React.createElement(\"input\", {\n      type: \"password\",\n      name: \"input\",\n      value: this.state.input,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }))), React.createElement(\"button\", {\n      onClick: () => this.buttonClick(),\n      id: \"button\",\n      type: \"submit\",\n      value: \"Login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \" \", \"Login\", \" \")));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/amitavbaruah/Documents/ethical-internal-website/src/components/Login.js"],"names":["React","Component","ethicalLogo","bcryptjs","require","fetch","localStorage","Login","constructor","handleChange","event","setState","input","target","value","state","hash","access_token","validity","hashPassword","routeChange","path","props","history","push","buttonClick","response","method","headers","Accept","body","JSON","stringify","hashedAttempt","json","token","correctPassword","alert","set","render"],"mappings":"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","sourcesContent":["import \"./Login.css\";\nimport React, { Component } from \"react\";\nimport ethicalLogo from \"./ethical.png\";\nconst bcryptjs = require(\"bcryptjs\");\nconst fetch = require(\"node-fetch\");\nconst localStorage = require(\"local-storage\");\n\nclass Login extends Component {\n  constructor() {\n    super();\n    this.state = {\n      input: \"\",\n      hash: \"\",\n      access_token: \"\",\n      validity: false\n    };\n  }\n\n  handleChange = event => {\n    this.setState({ input: event.target.value });\n  };\n\n  async hashPassword() {\n    const hash = await bcryptjs.hash(this.state.input, 0);\n    this.setState({ hash: hash });\n    return this.state.hash;\n  }\n\n  routeChange() {\n    let path = \"/announcements\";\n    this.props.history.push(path);\n  }\n\n  async buttonClick() {\n    const response = await fetch(\"http://localhost:3001/login\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        hashedAttempt: await this.hashPassword()\n      })\n    });\n    const json = await response.json();\n    this.setState({ access_token: json.token, validity: json.correctPassword });\n    if (!this.state.validity) {\n      alert(\"Wrong password\");\n    } else {\n      localStorage.set(\"token\", this.state.access_token);\n      this.routeChange();\n    }\n  }\n\n  render() {\n    return (\n      <body className=\"home\">\n        <div className=\"Block\"></div>\n        <div className=\"logo\">\n          <img className=\"pic\" src={ethicalLogo} alt=\"profile\" />\n        </div>\n        <div className=\"hi\">\n          <div>Welcome home EthiCal members, please log in below!</div>\n        </div>\n        <div className=\"login\">\n          <form>\n            <label>\n              Password:\n              <input\n                type=\"password\"\n                name=\"input\"\n                value={this.state.input}\n                onChange={this.handleChange}\n              />\n            </label>\n          </form>\n          <button\n            onClick={() => this.buttonClick()}\n            id=\"button\"\n            type=\"submit\"\n            value=\"Login\"\n          >\n            {\" \"}\n            Login{\" \"}\n          </button>\n        </div>\n      </body>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}